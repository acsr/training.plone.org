sudo: false
language: python
addons:
  apt:
    packages:
    - enchant
python:
- '2.7'
install:
- pip install -q -r requirements.txt --use-mirrors

script: sphinx-build -nW -b html -d _build/doctrees . _build/html

before_install:
- echo -e "docs.plone.org\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
- openssl aes-256-cbc -K $encrypted_107e817e8752_key -iv $encrypted_107e817e8752_iv
  -in deploy_key.enc -out deploy_key -d

after_success:
- chmod 600 deploy-key
- mv deploy-key ~/.ssh/id_rsa
- rsync  --numeric-ids -avze ssh foobar.txt/ docs-update@docs.plone.org:/home/docs-update
